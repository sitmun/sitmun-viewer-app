<div class="dashboard-item" [ngClass]="{'dashboard-item-maintenance': item.isUnavailable}">
  <div class="dashboard-item-image">
    <button (click)="navigateToMap(item.id)">
      <img [src]="item.logo || 'assets/img/card-no-image.svg'" />
    </button>
  </div>

  <div class="mobile-card dashboard-item-content" [ngClass]="item.isUnavailable ? 'dashboard-item-maintenance' : 'dashboard-item-active'">
    <mat-expansion-panel>
      <mat-expansion-panel-header>
       <ng-container *ngTemplateOutlet="panelHeader"></ng-container>
      </mat-expansion-panel-header>

      <ng-container *ngTemplateOutlet="cardContent"></ng-container>
    </mat-expansion-panel>
  </div>

  <div class="desktop-card dashboard-item-content" [ngClass]="item.isUnavailable ? 'dashboard-item-maintenance' : 'dashboard-item-active'">
    <ng-container *ngTemplateOutlet="panelHeader"></ng-container>
    <ng-container *ngTemplateOutlet="cardContent"></ng-container>
  </div>
</div>

<ng-template #panelHeader>
  <button (click)="navigateToApplicationDetailsOrMap(item.id)">
    <h3 class="dashboard-item-title"> {{item.title}} {{item.name}} </h3>
  </button>
</ng-template>

<ng-template #cardContent>
  <button class="dashboard-item-nbTerritories"
    [ngClass]="{ 'dashboard-item-maintenance': item.isUnavailable }"
    (click)="navigateToMap(applicationId, this.listOfTerritories.content[0].id)"
    *ngIf="nbTerritory === 1" >
    {{ this.listOfTerritories[0].name }}
  </button>

  <button class="dashboard-item-nbTerritories" [disabled]="item.isUnavailable" *ngIf="nbTerritory > 1" (click)="displayTerritoriesTag(item)">
    {{ nbTerritory }} {{ 'dashboardPage.nbTerritoriesTitle' | translate }}
  </button>

  <p class="dashboard-item-description">
    {{ item.description | descriptionMaxLength:DESCRIPTION_MAX_CHARACTER }}
  </p>

  <p class="dashboard-item-warning" *ngIf="item.maintenanceInformation && item.maintenanceInformation.length > 0"> {{ item.maintenanceInformation }} </p>
  <p class="dashboard-item-maintenanceInfo" *ngIf="item.isUnavailable"> {{ 'dashboardPage.maintenance' | translate }} </p>
  <button class="dashboard-item-moreDetails" *ngIf="!item.isUnavailable" (click)="navigateToApplicationDetails(item.id)"> {{ 'dashboardPage.moreDetails' | translate }} > </button>

</ng-template>

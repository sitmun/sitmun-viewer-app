window.CESIUM_BASE_URL=TC.apiLocation+"lib/cesium/build/";import{ApproximateTerrainHeights,Billboard,BillboardCollection,BoundingSphere,CallbackProperty,Camera,Cartesian2,Cartesian3,Cartographic,CesiumTerrainProvider,CircleGeometry,ClockRange,ClockStep,Color,ColorGeometryInstanceAttribute,ColorMaterialProperty,combine,Credit,CzmlDataSource,CustomDataSource,DataSourceCollection,DataSourceDisplay,DeveloperError,EasingFunction,Ellipsoid,EllipsoidGeodesic,EllipsoidTerrainProvider,Entity,Event,EventHelper,GeographicTilingScheme,GeometryInstance,Globe,GroundPrimitive,HeadingPitchRange,HeightReference,HeightmapTerrainData,HorizontalOrigin,ImageryLayer,ImageryState,IntersectionTests,JulianDate,LabelStyle,Math,Matrix3,Matrix4,PinBuilder,PolygonGeometry,PolygonHierarchy,PolygonPipeline,PolylineDashMaterialProperty,Property,Quaternion,Ray,Rectangle,RequestScheduler,RequestState,Resource,RuntimeError,ScreenSpaceEventHandler,ScreenSpaceEventType,SkyAtmosphere,SkyBox,TerrainProvider,TileCoordinatesImageryProvider,TileProviderError,TimeIntervalCollection,Transforms,TrustedServers,VerticalOrigin,Viewer,WebMapServiceImageryProvider,WebMapTileServiceImageryProvider,when,defaultValue,defined,deprecationWarning,sampleTerrainMostDetailed,Request,RequestType,TimeInterval,VERSION}from"cesium";const cesium={ApproximateTerrainHeights:ApproximateTerrainHeights,Billboard:Billboard,BillboardCollection:BillboardCollection,BoundingSphere:BoundingSphere,CallbackProperty:CallbackProperty,Camera:Camera,Cartesian2:Cartesian2,Cartesian3:Cartesian3,Cartographic:Cartographic,CesiumTerrainProvider:CesiumTerrainProvider,CircleGeometry:CircleGeometry,ClockRange:ClockRange,ClockStep:ClockStep,Color:Color,ColorGeometryInstanceAttribute:ColorGeometryInstanceAttribute,ColorMaterialProperty:ColorMaterialProperty,combine:combine,Credit:Credit,CzmlDataSource:CzmlDataSource,CustomDataSource:CustomDataSource,DataSourceCollection:DataSourceCollection,DataSourceDisplay:DataSourceDisplay,DeveloperError:DeveloperError,EasingFunction:EasingFunction,Ellipsoid:Ellipsoid,EllipsoidGeodesic:EllipsoidGeodesic,EllipsoidTerrainProvider:EllipsoidTerrainProvider,Entity:Entity,Event:Event,EventHelper:EventHelper,GeographicTilingScheme:GeographicTilingScheme,GeometryInstance:GeometryInstance,Globe:Globe,GroundPrimitive:GroundPrimitive,HeadingPitchRange:HeadingPitchRange,HeightReference:HeightReference,HeightmapTerrainData:HeightmapTerrainData,HorizontalOrigin:HorizontalOrigin,ImageryLayer:ImageryLayer,ImageryState:ImageryState,IntersectionTests:IntersectionTests,JulianDate:JulianDate,LabelStyle:LabelStyle,Math:Math,Matrix3:Matrix3,Matrix4:Matrix4,PinBuilder:PinBuilder,PolygonGeometry:PolygonGeometry,PolygonHierarchy:PolygonHierarchy,PolygonPipeline:PolygonPipeline,PolylineDashMaterialProperty:PolylineDashMaterialProperty,Property:Property,Quaternion:Quaternion,Ray:Ray,Rectangle:Rectangle,RequestScheduler:RequestScheduler,RequestState:RequestState,Resource:Resource,RuntimeError:RuntimeError,ScreenSpaceEventHandler:ScreenSpaceEventHandler,ScreenSpaceEventType:ScreenSpaceEventType,SkyAtmosphere:SkyAtmosphere,SkyBox:SkyBox,TerrainProvider:TerrainProvider,TileCoordinatesImageryProvider:TileCoordinatesImageryProvider,TileProviderError:TileProviderError,TimeIntervalCollection:TimeIntervalCollection,Transforms:Transforms,TrustedServers:TrustedServers,VerticalOrigin:VerticalOrigin,Viewer:Viewer,WebMapServiceImageryProvider:WebMapServiceImageryProvider,WebMapTileServiceImageryProvider:WebMapTileServiceImageryProvider,when:when,defaultValue:defaultValue,defined:defined,deprecationWarning:deprecationWarning,sampleTerrainMostDetailed:sampleTerrainMostDetailed,Request:Request,RequestType:RequestType,TimeInterval:TimeInterval,VERSION:VERSION},TOO_MANY_PARALLEL_REQUESTS="Too many parallel requests, so postpone loading tile";window.cesium=cesium;cesium.WCSTerrainProvider||import("./mergeTerrainProvider/MergeTerrainProvider").then(function(e){cesium.MergeTerrainProvider=e.default});cesium.Resource.prototype._clone=cesium.Resource.prototype.clone;cesium.Resource.prototype.clone=function(){let e=cesium.Resource.prototype._clone.apply(this,arguments);e.tcLayer=this.tcLayer;return e};cesium.ImageryLayer.prototype.__requestImagery=cesium.ImageryLayer.prototype._requestImagery;cesium.ImageryLayer.prototype._requestImagery=function(e){var r=this._imageryProvider,t=this;function i(r){if(!cesium.defined(r))return a();e.image=r;e.state=cesium.ImageryState.RECEIVED;e.request=void 0;cesium.TileProviderError.handleSuccess(t._requestImageError)}function a(i){if("string"!=typeof i||i!==TOO_MANY_PARALLEL_REQUESTS)if(i.status&&"200"===i.status.toString()){e.state=cesium.ImageryState.FAILED;e.request=void 0}else if(e.request.state!==cesium.RequestState.CANCELLED){e.state=cesium.ImageryState.FAILED;e.request=void 0;var a="Failed to obtain image tile X: "+e.x+" Y: "+e.y+" Level: "+e.level+".";t._requestImageError=cesium.TileProviderError.handleError(t._requestImageError,r,r.errorEvent,a,e.x,e.y,e.level,o,i)}else{e.state=cesium.ImageryState.UNLOADED;e.request=void 0}else{e.state=cesium.ImageryState.UNLOADED;e.request=void 0}}function o(){var t=new cesium.Request({throttle:!1,throttleByServer:!0,type:cesium.RequestType.IMAGERY});e.request=t;e.state=cesium.ImageryState.TRANSITIONING;var o=r.requestImage(e.x,e.y,e.level,t);if(cesium.defined(o)){cesium.defined(r.getTileCredits)&&(e.credits=r.getTileCredits(e.x,e.y,e.level));cesium.when(o,i,a)}else{e.state=cesium.ImageryState.UNLOADED;e.request=void 0}}o()};cesium.Resource.prototype._fetchImage=cesium.Resource.prototype.fetchImage;cesium.Resource.prototype.fetchImage=function(){if(this.tcLayer){let e=this,r=arguments,t=cesium.when.defer();this.tcLayer.getWebGLUrl.call(this.tcLayer,this.url).then(function(i){e.url=i.url;let a=i.image?new Promise(e=>{e(i.image)}):cesium.Resource.prototype._fetchImage.apply(e,r);a?a.then(t.resolve):t.reject(TOO_MANY_PARALLEL_REQUESTS)}).catch(function(e){t.reject(e)});return t.promise}return cesium.Resource.prototype._fetchImage.apply(this,arguments)};export default cesium;